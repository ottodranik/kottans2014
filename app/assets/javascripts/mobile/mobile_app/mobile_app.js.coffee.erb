@App = angular.module 'App', ['ngRoute', 'ngSanitize', 'ngAnimate', 'ivpusic.cookie', 'infinite-scroll','facebook', 'vkontakte', 'angulartics', 'angulartics.google.analytics']

@App.constant 'cfg',  
  VKONTAKTE_API_ID: "<%= Global.socials['socials']['vkontakte']['app_id'] %>"
  FACEBOOK_APP_ID: "<%= Global.socials['socials']['facebook']['app_id'] %>"
  SHARE_IMAGES:    
    root:
      vkontakte: 'photo7100334_335155429'
      facebook: 'https://pp.vk.me/c618826/v618826334/dffd/GjHtj_dHY8U.jpg'

@App.config ($routeProvider, $httpProvider, FacebookProvider, VkontakteProvider, cfg) ->
  
  FacebookProvider.setAppId cfg.FACEBOOK_APP_ID
  FacebookProvider.setXfbml false
  FacebookProvider.setInitCustomOption 'version', 'v2.0'
  VkontakteProvider.setApiId cfg.VKONTAKTE_API_ID

  $httpProvider.defaults.headers.common["X-CSRF-TOKEN"] = $("meta[name=\"csrf-token\"]").attr("content")

  $routeProvider.when('/', {
    templateUrl: "<%= asset_path('mobile/main.html') %>",
    controller: 'MainController'
  })
  # .when('/start', {
  #   templateUrl: "<%= asset_path('mobile/start.html') %>"
  # })
  .when('/questions/:activationName', {
    templateUrl: "<%= asset_path('mobile/questions.html') %>"
    controller: "QuestionsController"
  })
  .when('/news', {
    templateUrl: "<%= asset_path('mobile/newslist.html') %>"
    controller: "NewsController"
  })
  .when('/news/:id', {
    templateUrl: "<%= asset_path('mobile/newsdetail.html') %>"
    controller: "NewsController"
  })
  .when('/rules', {
    templateUrl: "<%= asset_path('mobile/rules.html') %>"    
  })
  .otherwise
  	redirectTo: '/'
